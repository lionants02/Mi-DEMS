- [เจ้าหน้าที่ในระบบ](#เจ้าหน้าที่ในระบบ)
- [โฟลเข้าเวร](#โฟลเข้าเวร)
- [ออกเวรแบบผู้ใช้เลือก](#ออกเวรแบบผู้ใช้เลือก)
- [ออกเวรอัตโนมัติ](#ออกเวรอัตโนมัติ)
- [HL7 ที่เกี่ยวข้อง ไม่ได้ใช้แล้วให้ outsource รับผิดชอบ](#hl7-ที่เกี่ยวข้อง-ไม่ได้ใช้แล้วให้-outsource-รับผิดชอบ)

## เจ้าหน้าที่ในระบบ

```mermaid
mindmap
  root((เจ้าหน้าที่ในระบบ v1<br>18-06-2024))
    ศูนย์รับแจ้งเหตุ หน่วยปฏิบัติการอำนวยการ
        call taker
        coordinator
        nonemergency
        dispatcher
        supervisor
        แพทย์อำนวยการ
    หน่วยปฏิบัติการแพทย์
        เจ้าหน้าที่หน่วยปฏิบัติการแพทย์ มูลนิธิ รพ.
    กลุ่มชุดที่ออกปฏิบัติการ
        EMT-I
        EMT-B
        Paramedic
        พนักงานขับรถ
    โรงพยาบาล
        er-user
```  

## โฟลเข้าเวร
```mermaid
flowchart TD
    s("เข้าเวร")
    s-->check{"ปัจจุบันมีการเข้าเวร\nอยู่ในระบบหรือไม่"}

    check-->|"ไม่ได้เข้าเวร"|count_org{"สังกัดมากกว่า\n1 หน่วย"}
    check-......->|"เข้าเวรอยู่"|return_error("Return http 400 \nError ปัจจุบันเข้าเวรอยู่ต้องออกเวรก่อน")

    count_org-->|"สังกัด 1 หน่วย"|org_one["เลือกหน่วยงานให้อัตโนมัติ"]
    count_org-->|"สังกัดหลายหน่วย"|org_many[["ให้ผู้ใช้เลือกหน่วยที่จะเข้าเวร"]]

    count_job{"ทำงานมากกว่า\n1 ตำแหน่ง"}
    org_one-->count_job
    org_many-->count_job

    count_job-->|"ทำงาน 1 ตำแหน่ง"|job_one["เลือกตำแหน่งให้อัตโนมัติ"]
    count_job-->|"ทำงานได้หลายตำแหน่ง"|job_many[["ให้ผู้ใช้เลือกตำแหน่งที่จะเข้าเวร\nหมอ,er,Paramedic,..."]]

    check_in["เรียกฟังก์ชั่นเข้าเวร"]
    job_one-->check_in
    job_many-->check_in

    check_in-->R("Return http 200 \nSuccess เข้าเวรสำเร็จ")
```


## ออกเวรแบบผู้ใช้เลือก
```mermaid
flowchart TD
    s("ออกเวร")
    s-->check{"ปัจจุบันมีการเข้าเวร\nอยู่ในระบบหรือไม่"}
    isCheckin-->R("Return http 200 \nSuccess ออกเวรสำเร็จ")
    check-..->|"ไม่ได้เข้าเวร"|return_error("Return 400 \nError ไม่ได้เข้าเวรอยู่")

    check-->|"มีการเข้าเวรอยู่"|isCheckin[["เรียกฟังก์ชั่นออกเวร"]]
    isCheckin-->R("Return http 200 \nSuccess ออกเวรสำเร็จ")
```


## ออกเวรอัตโนมัติ


## HL7 ที่เกี่ยวข้อง ไม่ได้ใช้แล้วให้ outsource รับผิดชอบ
- organization ข้อมูลหน่วยงาน
- practitioner ข้อมูลเจ้าหน้าที่